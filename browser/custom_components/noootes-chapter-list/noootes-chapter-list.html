<link rel="import" href="../../bower_components/polymer/polymer.html" />

<!-- Iron -->
<link rel="import" href="../../bower_components/iron-selector/iron-selector.html" />
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html" />
<!-- Paper -->
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html" />
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html" />
<!-- Neon -->
<!-- Custom/Behaviors -->
<link rel="import" href="../noootes-chapter/noootes-chapter.html" />
<link rel="import" href="../../behaviors/chapter-behavior/chapter-behavior.html" />
<!-- Other -->
<link rel="import" href="../../bower_components/firebase-element/firebase-collection.html" />

<dom-module id="noootes-chapter-list">
    <link rel="import" type="css" href="noootes-chapter-list.css?__inline" />
    <template>
        <firebase-collection id="firebase-chapter-list" location="[[_location]]" data="{{_data}}"></firebase-collection>

        <div id="chapter-toolbar" class="layout vertical">
            <div class="layout horizontal">
                <h3>Chapters</h3>
                <span class="flex"></span>
                <paper-icon-button id="button-mode" icon="{{_getIcon(_editMode)}}" on-tap="toggleMode"></paper-icon-button>
            </div>

            <!-- Editing Menu -->
            <iron-collapse opened="{{_editMode}}">
                <!-- Main Menu -->
                <iron-collapse class="layout horizontal justified" opened="{{_menusOpen.main}}">
                    <paper-icon-button id="button-add" icon="add"></paper-icon-button>
                    <paper-icon-button id="button-edit" icon="create"></paper-icon-button>
                    <paper-icon-button id="button-move" icon="reorder"></paper-icon-button>
                    <paper-icon-button id="button-delete" icon="delete"></paper-icon-button>
                </iron-collapse>

                <!-- Add -->
                <iron-collapse opened="{{_menusOpen.add}}">
                    <form is="iron-form">
                        <paper-input name="title" label="Title" required on-keydown="submitForm"></paper-input>
                        <paper-radio-group selected="{{_addType}}" attr-for-selected="value">
                            <paper-radio-button name="type" value="child">Child</paper-radio-button>
                            <paper-radio-button name="type" value="sibling">Sibling</paper-radio-button>
                        </paper-radio-group>
                    </form>
                </iron-collapse>
                <!-- Edit -->
                <!-- Move -->
                <!-- Delete -->
            </iron-collapse>
        </div>

        <iron-selector id="chapters-container" selected="{{_selectedChapter}}" attr-for-selected="id">
            <template is="dom-repeat" id="chapters-template" items="{{_data}}">
                <noootes-chapter id="{{item.__firebaseKey__}}" chapter="{{item}}"></noootes-chapter>
            </template>
        </iron-selector>
    </template>
    <script src="noootes-chapter-list.js?__inline"></script>
</dom-module>
